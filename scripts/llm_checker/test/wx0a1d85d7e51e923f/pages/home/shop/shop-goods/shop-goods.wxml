<import src="/pages/template/toast/toast.wxml"></import>
<import src="/pages/template/footer/footer.wxml"></import>
<scroll-view scrollWithAnimation scrollY class="margin-top">
  <waterfall
    customClass="waterfall-box"
    id="waterfall01"
    isAllLoaded="{{isAllLoaded}}"
    loading="{{updateLoading}}"
  >
    <waterfall-item
      bindtap="goodItemClick"
      customClass="product-item-box"
      data-item="{{item}}"
      wx:for="{{goodsData.data}}"
      wx:key="index"
    >
      <view>
        <view bind:tap="onTap" class="">
          <view
            class="bg-img"
            style="background-image: url({{item.img_url+'?x-oss-process=image/resize,m_lfit,h_300,w_300'}});height:{{item.aspect_ratio*340}}rpx"
          >
            <view></view>
          </view>
          <view class="text-center">
            <view
              class="flex text-white align-center"
              style="background-color: #e84c1e; radius: 20rpx; height: 70rpx"
            >
              <view class="flex-sub">
                <view class="text-price text-lg">{{item.activity_price}}</view>
                <view
                  class="text-sm text-price text-sm"
                  style="margin-top: -10rpx"
                >
                  <text style="text-decoration: line-through; color: #dcdcdc"
                    >{{item.price}}</text
                  >
                </view>
              </view>
              <view
                class="flex-sub bg-img text-black padding-right-xs buy-bg flex align-center"
              >
                <view class="text-right" style="width: 100%">
                  <text>{{Str.buy[lanIndex]}}</text>
                </view>
              </view>
            </view>
          </view>
          <view class="text-bold text-black padding-xs uy-tom"
            >{{isUy?item.uy_name:item.ch_name}}</view
          >
          <view
            class="margin-tb-sm padding-lr-xs flex justify-start align-center"
          >
            <view
              class="cu-avatar radius"
              style="background-image:url({{ossImage+item.shop.icon_url+'?x-oss-process=image/resize,m_lfit,h_200,w_200'}})"
            ></view>
            <view class="padding-left-xs text-left">
              <view
                class="text-cut uy-tom text-gray text-sm {{isUy?'rtl':''}}"
                style="width: 220rpx"
              >
                {{isUy?item.shop.uy_name:item.shop.ch_name}}
              </view>
              <view class="flex justify-start align-center">
                <view>
                  <text class="icon icon-favorfill text-c4"></text>
                  <text class="text-c4">{{item.shop.stars}}</text>
                </view>
                <view
                  class="padding-left-sm text-gray text-sm"
                  wx:if="{{item.shop.distance&&item.shop.distance!=-1}}"
                >
                  {{item.shop.distance}}
                </view>
                <view class="padding-left-xs text-sm text-gray">45分钟</view>
              </view>
            </view>
          </view>
          <view class="padding-xs" wx:if="{{0}}">
            <view class="">
              <text class="text-black text-bold text-lg"
                >{{isUy?item.uy_name:item.ch_name}}</text
              >
            </view>
            <view>
              <text class="text-gray"
                >{{isUy?item.shop.uy_name:item.shop.ch_name}}</text
              >
            </view>
            <view class="flex justify-between" style="width: 300rpx">
              <view class="text-df">
                <text
                  class="icon icon-favorfill text-{{index<item.shop.star_count?'c4':'grey1'}}"
                  wx:for="{{5}}"
                  wx:for-item="_item"
                  wx:key="index"
                ></text>
              </view>
              <view class="text-gray"></view>
            </view>
            <view class="flex justify-start align-center">
              <view class="">
                <i
                  class="iconfont icon-thumb_down text-gray"
                  style="font-size: 40rpx"
                ></i>
                <text class="padding-left-xs text-gray"
                  >{{item.thumbs_down_count}}</text
                >
              </view>
              <view class="padding-lr">
                <i
                  class="iconfont icon-thumb_up text-c4"
                  style="font-size: 36rpx"
                ></i>
                <text class="padding-left-xs text-grey"
                  >{{item.thumbs_up_count}}</text
                >
              </view>
            </view>
            <view class="padding-xs text-center">
              <view
                class="flex text-white align-center"
                style="background-color: #e84c1e; radius: 20rpx; height: 70rpx"
              >
                <view class="flex-sub">
                  <view class="text-price text-lg"
                    >{{item.activity_price}}</view
                  >
                  <view
                    class="text-sm text-price text-sm text-black"
                    style="margin-top: -10rpx"
                  >
                    <text style="text-decoration: line-through"
                      >{{item.price}}</text
                    >
                  </view>
                </view>
                <view
                  class="flex-sub bg-img text-black padding-right-xs buy-bg flex align-center"
                >
                  <view class="text-right" style="width: 100%">
                    <text>{{Str.buy[lanIndex]}}</text>
                  </view>
                </view>
              </view>
            </view>
          </view>
        </view>
      </view>
    </waterfall-item>
  </waterfall>
</scroll-view>
<view>
  <view class="weui-loadmore weui-loadmore_line">
    <view
      class="weui-loadmore__tips weui-loadmore__tips_in-line"
      style="background-color: #f1f1f1"
    >
      {{Str.noContent[lanIndex]}}</view
    >
  </view>
</view>
<loading hidden="{{!isLoading}}">{{Str.loadingTxt[lanIndex]}}</loading>
